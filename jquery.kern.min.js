(function(){var a,c,b,d;a=jQuery,d='0.1.6',c={letters:!0,words:!0,transform:!1,tag:'<span/>',prefix:'kern',undo:!0,filter:function(){return this.nodeType===3&&/\S/.test(this.nodeValue)}},b=function(g){var e,c,d,f;return c=a.extend({},this.kern.defaults,g),b=function(){var b;return b=a(this),c.words&&(b=b.map(function(){return f(this)})),c.letters&&(b=b.map(function(){return e(this)})),b},f=function(b){var e,g,h,f;return a(b).wrap(a(c.tag,{'class':''+c.prefix+'-words'})),function(a){while(null!=(h=/\S+(\s+)?$/.exec(b.nodeValue)))e=h,g=e.index,f=e[1],null!=f&&b.splitText(b.nodeValue.length-f.length),a.push(d(b,g,''+c.prefix+'-word'));return a}.call(this,[])},e=function(b){var e;return a(b).wrap(a(c.tag,{'class':''+c.prefix+'-letters'})),e=b.nodeValue.length,function(a){while(--e>=0)a.push(d(b,e,''+c.prefix+'-letter'));return a}.call(this,[])},d=function(b,f,d){var e;return b=b.splitText(f),c.transform?(e=a(b).wrap(a(c.tag)).parent(),e.attr('class',''+d+' '+d+'-'+e.prop('outerText'))):a(b).wrap(a(c.tag,{'class':''+d+' '+d+'-'+b.nodeValue})),b},c.undo&&this.find('.'+c.prefix+'-words, .'+c.prefix+'-letters').replaceWith(function(){return a(this).text()}),this.addClass(''+c.prefix+'-kerned').find(':not(iframe)').addBack().contents().filter(c.filter).map(b),this},a.extend(b,{defaults:c,version:d}),a.fn.extend({kern:b})}.call(this))
